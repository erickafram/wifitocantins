=============================================================================
DEBUG - CREDENCIAIS SANTANDER PIX
=============================================================================

üìå MUDAN√áA APLICADA:
- Adicionado par√¢metro 'scope' nas requisi√ß√µes OAuth
- Scope: cob.write cob.read pix.write pix.read webhook.read webhook.write

=============================================================================
TESTE AGORA
=============================================================================

cd /home/tocantinstransportewifi/htdocs/www.tocantinstransportewifi.com.br

# Fazer upload do arquivo atualizado

# Limpar cache
php artisan config:clear

# Testar
php artisan santander:pix test

=============================================================================
SE CONTINUAR DANDO ERRO 400 - PR√ìXIMOS PASSOS
=============================================================================

O erro "A requisi√ß√£o n√£o possui os par√¢metros necess√°rios" pode significar:

1. ‚ùå CLIENT_ID ou CLIENT_SECRET INCORRETOS
   
   Suas credenciais:
   - CLIENT_ID: RA4UP23L7tQLlAlcsk8O9QF9Q6Oih6NB (32 chars)
   - CLIENT_SECRET: nSkWIV8TFJUGRBur (16 chars)
   
   ‚ö†Ô∏è ATEN√á√ÉO: Essas credenciais parecem ser do formato Apigee/API Gateway
   
   VERIFIQUE COM O RAFAEL:
   - Essas credenciais s√£o do ambiente PRODUCTION ou SANDBOX?
   - O certificado .pfx est√° vinculado a essas credenciais?
   - Existe algum par√¢metro adicional necess√°rio?

2. ‚ùå AMBIENTE INCORRETO (production vs sandbox)
   
   Se as credenciais s√£o de SANDBOX, mude no .env:
   
   nano .env
   
   # Procure por:
   SANTANDER_ENVIRONMENT=production
   
   # Mude para:
   SANTANDER_ENVIRONMENT=sandbox
   
   # Salve e teste novamente:
   php artisan config:clear
   php artisan santander:pix test

3. ‚ùå CERTIFICADO N√ÉO VINCULADO √Ä CONTA
   
   O certificado digital deve estar registrado no Portal do Desenvolvedor Santander
   e vinculado ao mesmo CLIENT_ID que voc√™ est√° usando.
   
   VERIFIQUE:
   - Entre no Portal do Desenvolvedor Santander
   - V√° em "Meus Aplicativos" ou "Certificados"
   - Confirme se o certificado est√° ativo

4. ‚ùå CONTA N√ÉO ATIVADA/APROVADA
   
   O Santander pode exigir aprova√ß√£o manual da conta antes de liberar o acesso √† API PIX.
   
   ENTRE EM CONTATO:
   - Suporte Santander Empresas: 0800 762 7777
   - Portal do Desenvolvedor: https://developer.santander.com.br
   - Email: suporte.api@santander.com.br

=============================================================================
TESTE ALTERNATIVO - CONSULTAR DOCUMENTA√á√ÉO
=============================================================================

Se voc√™ tem acesso ao Portal do Desenvolvedor Santander:

1. Acesse: https://developer.santander.com.br
2. Fa√ßa login
3. V√° em "Documenta√ß√£o" > "PIX" > "Autentica√ß√£o"
4. Verifique:
   - Endpoint correto de OAuth (trust-pix.santander.com.br)
   - Par√¢metros exigidos para grant_type=client_credentials
   - Formato esperado do certificado mTLS

=============================================================================
PERGUNTAS PARA O RAFAEL
=============================================================================

Envie estas perguntas para o Rafael:

1. As credenciais CLIENT_ID e CLIENT_SECRET s√£o de PRODUCTION ou SANDBOX?

2. O certificado santander.pfx est√° vinculado a essas credenciais no Portal do Santander?

3. A conta j√° foi aprovada/ativada para integra√ß√£o PIX?

4. Existe algum par√¢metro adicional necess√°rio na requisi√ß√£o OAuth al√©m de:
   - grant_type
   - client_id
   - client_secret
   - scope

5. Qual √© o endpoint correto de autentica√ß√£o que ele est√° usando?
   - Production: https://trust-pix.santander.com.br/oauth/token
   - Sandbox: https://trust-pix-h.santander.com.br/oauth/token

6. Voc√™ tem alguma documenta√ß√£o espec√≠fica ou exemplo de integra√ß√£o?

=============================================================================
ALTERNATIVA - USAR WOOVI ENQUANTO ISSO
=============================================================================

Enquanto resolve o Santander, o sistema j√° est√° configurado para usar a Woovi:

# Editar .env
nano .env

# Mudar temporariamente:
PIX_GATEWAY=woovi

# Salvar e limpar cache
php artisan config:clear

# Testar um pagamento no portal
# O sistema vai usar a Woovi (que j√° est√° funcionando)

# Quando o Santander funcionar, volte para:
PIX_GATEWAY=santander

============================================================================= 